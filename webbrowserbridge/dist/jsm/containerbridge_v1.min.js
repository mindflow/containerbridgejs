import{Logger as t,TimePromise as e}from"./coreutil_v1.js";class n{static timeout(t,e){return new Promise((function(n,s){setTimeout((function(){s(new Error("timeout"))}),t),e.then(n,s)}))}static delay(t,e){return setTimeout(e,t)}static pause(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}}class s{static async store(t,e){if(window.PasswordCredential){const n=new PasswordCredential({id:t,password:e}),s=await navigator.credentials.store(n);return LOG.info(s),s}return null}}class r{static open(t,e){return window.indexedDB.open(t,e)}}new t("ContainerElement");class a{static getElementById(t){return document.getElementById(t)}static createTextNode(t){return document.createTextNode(t)}static createElement(t){return document.createElement(t)}static removeElement(t){const e=document.getElementById(t);e.parentNode.removeChild(e)}static createElementNS(t,e){return document.createElementNS(t,e)}static appendRootUiChild(t){document.getElementsByTagName("body")[0].appendChild(t)}static appendRootMetaChild(t){document.getElementsByTagName("head")[0].appendChild(t)}static prependChild(t,e){t.prepend(e)}static appendChild(t,e){t.appendChild(e)}static addEventListener(t,e,n,s){t.addEventListener(e,n,s)}static setAttribute(t,e,n){t.setAttribute(e,n)}static getAttribute(t,e){return t.getAttribute(e)}static contains(t,e){return t.contains(e)}static isConnected(t){return t.isConnected}static isUIElement(t){return t instanceof HTMLElement}static scrollLockTo(t,n,s,r){const a=t=>{t.target.scrollTo(n,s)};t.addEventListener("scroll",a),e.asPromise(r,(()=>{t.removeEventListener("scroll",a)}))}}class i{constructor(t){this.event=t,"dragstart"==this.event.type.toLowerCase()&&this.event.dataTransfer.setData("text/plain",null)}stopPropagation(){this.event.stopPropagation()}preventDefault(){this.event.preventDefault()}get files(){if(this.event.target&&this.event.target.files)return this.event.target.files;if(this.event.dataTransfer){const t=this.event.dataTransfer;if(t.files)return t.files}return[]}get offsetX(){return this.event.offsetX}get offsetY(){return this.event.offsetY}get clientX(){return this.event.clientX}get clientY(){return this.event.clientY}get target(){if(this.event&&this.event.target)return ConfiguredFunction.execute("mapElement",this.event.target)}get relatedTarget(){return this.event&&this.event.relatedTarget?ConfiguredFunction.execute("mapElement",this.event.relatedTarget):null}getRelatedTargetAttribute(t){return this.event.relatedTarget?ConfiguredFunction.execute("mapElement",this.event.relatedTarget).getAttributeValue(t):null}get targetValue(){return this.target?this.target.value:null}get keyCode(){return this.event.keyCode}isKeyCode(t){return this.event.keyCode===t}}class o{constructor(t){this.response=t}async json(){return await this.response.json()}async text(){return await this.response.text()}get status(){return this.response.status}get statusText(){return this.response.statusText}get headers(){return this.response.headers}get ok(){return this.response.ok}static async from(t,e=1e3){const s=await n.timeout(e,t);return new o(s)}}new t("ContainerHttpClient");class c{static async fetch(t,e,n=4e3){const s=fetch(t,e);return o.from(s,n)}static async upload(t,e,n=null,s=null,r=4e3){const a=new FormData;for(const t of e)a.append("file",t);const i=new XMLHttpRequest;i.open("POST",t),i.timeout=r,n&&i.setRequestHeader("Authorization","Bearer "+n),i.onprogress=t=>{callProgressCallbackMethod(s,t.loaded,t.total)},i.ontimeout=()=>Promise.reject("Request timed out");const o=new Promise(((t,e)=>{i.onload=()=>{200===i.status?t(i.response):e(i.statusText)},i.ontimeout=()=>{e("Request timed out")}}));return i.send(a),o}callProgressCallbackMethod(t,e,n){t&&t.call(e,n)}}class l{static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}static removeLocalAttribute(t){window.localStorage.removeItem(t)}static hasLocalAttribute(t){return null!==window.localStorage.getItem(t)}static getLocalAttribute(t){return window.localStorage.getItem(t)}}new t("ContainerSessionStorage");class u{static setSessionAttribute(t,e){window.sessionStorage.setItem(t,e)}static removeSessionAttribute(t){window.sessionStorage.removeItem(t)}static getSessionAttribute(t){return window.sessionStorage.getItem(t)}static hasSessionAttribute(t){return null!==window.sessionStorage.getItem(t)}static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}}class d{static addEventListener(t,e,n){const s=t=>{e.call(new n(t))};return window.addEventListener(t,s),()=>{window.removeEventListener(t,s)}}}new t("ContainerUrl");class g{static go(t){window.location=t}static back(){window.history.back()}static replaceUrl(t,e,n){window.history.replaceState(n,e,t)}static pushUrl(t,e,n){window.history.pushState(n,e,t)}static currentUrl(){return window.location.href}static addUserNavigateListener(t,e){d.addEventListener("popstate",t,e)}}export{n as ContainerAsync,s as ContainerCredentialsStorage,r as ContainerDatabaseStorage,a as ContainerElementUtils,i as ContainerEvent,c as ContainerHttpClient,o as ContainerHttpResponse,l as ContainerLocalStorage,u as ContainerSessionStorage,g as ContainerUrl,d as ContainerWindow};
