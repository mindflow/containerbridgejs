import{Logger as e,TimePromise as t}from"./coreutil_v1.js";class n{static timeout(e,t){return new Promise((function(n,s){setTimeout((function(){s(new Error("timeout"))}),e),t.then(n,s)}))}static delay(e,t){return setTimeout(t,e)}static pause(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}}class s{static async store(e,t){if(window.PasswordCredential){const n=new PasswordCredential({id:e,password:t}),s=await navigator.credentials.store(n);return LOG.info(s),s}return null}}class r{static open(e,t){return window.indexedDB.open(e,t)}}class i{constructor(e){this.text=e}get value(){return this.text.nodeValue}set value(e){this.text.nodeValue=e}}class a{constructor(e){this.name=e.name,this.type=e.type,this.size=e.size,this.lastModified=e.lastModified,this.file=e}}new e("ContainerElement");class l{static getElementById(e){return new u(document.getElementById(e))}static createTextNode(e){return new i(document.createTextNode(e))}static createElement(e){return new u(document.createElement(e))}static removeElement(e){const t=document.getElementById(e);t.parentNode.removeChild(t)}static createElementNS(e,t){return new u(document.createElementNS(e,t))}static appendRootUiChild(e){document.getElementsByTagName("body")[0].appendChild(e.element)}static appendRootMetaChild(e){document.getElementsByTagName("head")[0].appendChild(e.element)}static setAttributeValue(e,t,n){e.setAttributeValue(t,n)}static getAttributeValue(e,t){return e.getAttributeValue(t)}static contains(e,t){return e.contains(t)}static isConnected(e){return e.isConnected}static isUIElement(e){return e instanceof HTMLElement}static scrollLockTo(e,n,s,r){const i=e=>{e.target.scrollTo(n,s)};e.addEventListener("scroll",i),t.asPromise(r,(()=>{e.removeEventListener("scroll",i)}))}static toFileDataArray(e){const t=[];for(const n of e)t.push(new a(n));return t}}class o{constructor(e){this.event=e,"dragstart"==this.event.type.toLowerCase()&&this.event.dataTransfer.setData("text/plain",null)}stopPropagation(){this.event.stopPropagation()}preventDefault(){this.event.preventDefault()}get files(){if(this.event.target&&this.event.target.files){const e=this.event.target;return l.toFileDataArray(e.files)}if(this.event.dataTransfer){const e=this.event.dataTransfer;if(e.files)return l.toFileDataArray(e.files)}return[]}get offsetX(){return this.event.offsetX}get offsetY(){return this.event.offsetY}get clientX(){return this.event.clientX}get clientY(){return this.event.clientY}get target(){if(this.event&&this.event.target)return new u(this.event.target)}get relatedTarget(){return this.event&&this.event.relatedTarget?new u(this.event.relatedTarget):null}getRelatedTargetAttribute(e){return this.event.relatedTarget?new u(this.event.relatedTarget).getAttributeValue(e):null}get targetValue(){return this.target?this.target.value:null}get keyCode(){return this.event.keyCode}isKeyCode(e){return this.event.keyCode===e}}class u{constructor(e){this.element=e}contains(e){return this.element.contains(e.element)}getAttributeValue(e){return this.element.getAttribute(e)}setAttributeValue(e,t){this.element.setAttribute(e,t)}removeAttribute(e){this.element.removeAttribute(e)}hasAttribute(e){return this.element.hasAttribute(e)}get id(){return this.getAttributeValue("id")}get className(){return this.getAttributeValue("class")}get innerText(){return this.element.innerText}set innerText(e){this.element.innerText=e}get innerHTML(){return this.element.innerHTML}set innerHTML(e){this.element.innerHTML=e}get value(){return this.element.value}set value(e){this.element.value=e}get disabled(){return this.element.disabled}set disabled(e){this.element.disabled=e}get style(){return this.element.style}set style(e){this.element.style=e}get isConnected(){return this.element.isConnected}addEventListener(e,t,n){this.element.addEventListener(e,(e=>{t.call(new o(e))}),n)}get name(){return this.element.name}set name(e){this.element.name=e}get type(){return this.element.type}set type(e){this.element.type=e}get text(){return this.element.text}set text(e){this.element.text=e}get tagName(){return this.element.tagName}get offsetWidth(){return this.element.offsetWidth}get offsetHeight(){return this.element.offsetHeight}get boundingClientRect(){return this.element.getBoundingClientRect()}get parentNode(){return this.element.parentNode?new u(this.element.parentNode):null}appendChild(e){e instanceof u&&this.element.appendChild(e.element),e instanceof i&&this.element.appendChild(e.text)}removeChild(e){this.element.removeChild(e.element)}replaceChild(e,t){this.element.replaceChild(e.element,t.element)}get firstChild(){return this.element.firstChild?new u(this.element.firstChild):null}get lastChild(){return this.element.lastChild?new u(this.element.lastChild):null}focus(){this.element.focus()}select(){this.element.select&&this.element.select()}get checked(){return this.element.checked}set checked(e){this.element.checked=e}submit(){if(this.element.submit)return this.element.submit()}click(){this.element.click()}dispatchEvent(e){return this.element.dispatchEvent(new InputEvent(e))}playMuted(){return this.element.play?(this.element.muted=!0,this.element.play()):null}mute(){this.element.mute&&(this.element.muted=!0)}unmute(){this.element.unmute&&(this.element.muted=!1)}play(){return this.element.play?this.element.play():null}pause(){return this.element.pause?this.element.pause():null}}class c{constructor(e){this.response=e}async json(){return await this.response.json()}async text(){return await this.response.text()}get status(){return this.response.status}get statusText(){return this.response.statusText}get headers(){return this.response.headers}get ok(){return this.response.ok}static async from(e,t=1e3){const s=await n.timeout(t,e);return new c(s)}}new e("ContainerHttpClient");class h{static async fetch(e,t,n=4e3){const s=fetch(e,t);return c.from(s,n)}static async upload(e,t,n=null,s=null,r=4e3){const i=new FormData;for(const e of t)i.append("file",e);const a=new XMLHttpRequest;a.open("POST",e),a.timeout=r,n&&a.setRequestHeader("Authorization","Bearer "+n),a.onprogress=e=>{callProgressCallbackMethod(s,e.loaded,e.total)},a.ontimeout=()=>Promise.reject("Request timed out");const l=new Promise(((e,t)=>{a.onload=()=>{200===a.status?e(a.response):t(a.statusText)},a.ontimeout=()=>{t("Request timed out")}}));return a.send(i),l}callProgressCallbackMethod(e,t,n){e&&e.call(t,n)}}class m{static setLocalAttribute(e,t){window.localStorage.setItem(e,t)}static removeLocalAttribute(e){window.localStorage.removeItem(e)}static hasLocalAttribute(e){return null!==window.localStorage.getItem(e)}static getLocalAttribute(e){return window.localStorage.getItem(e)}}new e("ContainerSessionStorage");class d{static setSessionAttribute(e,t){window.sessionStorage.setItem(e,t)}static removeSessionAttribute(e){window.sessionStorage.removeItem(e)}static getSessionAttribute(e){return window.sessionStorage.getItem(e)}static hasSessionAttribute(e){return null!==window.sessionStorage.getItem(e)}static setLocalAttribute(e,t){window.localStorage.setItem(e,t)}}class g{static addEventListener(e,t){const n=e=>{t.call(new o(e))};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}}}new e("ContainerUrl");class p{static go(e){window.location=e}static back(){window.history.back()}static replaceUrl(e,t,n){window.history.replaceState(n,t,e)}static pushUrl(e,t,n){window.history.pushState(n,t,e)}static currentUrl(){return window.location.href}static addUserNavigateListener(e){g.addEventListener("popstate",e)}}export{n as ContainerAsync,s as ContainerCredentialsStorage,r as ContainerDatabaseStorage,u as ContainerElement,l as ContainerElementUtils,o as ContainerEvent,a as ContainerFileData,h as ContainerHttpClient,c as ContainerHttpResponse,m as ContainerLocalStorage,d as ContainerSessionStorage,i as ContainerText,p as ContainerUrl,g as ContainerWindow};
