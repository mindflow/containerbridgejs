import{Logger as t,TimePromise as e}from"./coreutil_v1.js";class s{static timeout(t,e){return new Promise((function(s,n){setTimeout((function(){n(new Error("timeout"))}),t),e.then(s,n)}))}static delay(t,e){return setTimeout(e,t)}static pause(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}}class n{static async store(t,e){if(window.PasswordCredential){const s=new PasswordCredential({id:t,password:e}),n=await navigator.credentials.store(s);return LOG.info(n),n}return null}}class r{static open(t,e){return window.indexedDB.open(t,e)}}new t("ContainerElement");class o{static getElementById(t){return document.getElementById(t)}static createTextNode(t){return document.createTextNode(t)}static createElement(t){return document.createElement(t)}static removeElement(t){const e=document.getElementById(t);e.parentNode.removeChild(e)}static createElementNS(t,e){return document.createElementNS(t,e)}static appendRootUiChild(t){document.getElementsByTagName("body")[0].appendChild(t)}static appendRootMetaChild(t){document.getElementsByTagName("head")[0].appendChild(t)}static prependChild(t,e){t.prepend(e)}static appendChild(t,e){t.appendChild(e)}static addEventListener(t,e,s,n){t.addEventListener(e,s,n)}static setAttribute(t,e,s){t.setAttribute(e,s)}static getAttribute(t,e){return t.getAttribute(e)}static contains(t,e){return t.contains(e)}static isConnected(t){return t.isConnected}static isUIElement(t){return t instanceof HTMLElement}static scrollLockTo(t,s,n,r){const o=t=>{t.target.scrollTo(s,n)};t.addEventListener("scroll",o),e.asPromise(r,(()=>{t.removeEventListener("scroll",o)}))}}class a{constructor(t){this.response=t}async json(){return await this.response.json()}async text(){return await this.response.text()}get status(){return this.response.status}get statusText(){return this.response.statusText}get headers(){return this.response.headers}get ok(){return this.response.ok}static async from(t,e=1e3){const n=await s.timeout(e,t);return new a(n)}}new t("ContainerHttpClient");class i{static async fetch(t,e,s=4e3){const n=fetch(t,e);return a.from(n,s)}static async upload(t,e,s=null,n=null,r=4e3){const o=new FormData;for(const t of e)o.append("file",t);const a=new XMLHttpRequest;a.open("POST",t),a.timeout=r,s&&a.setRequestHeader("Authorization","Bearer "+s),a.onprogress=t=>{callProgressCallbackMethod(n,t.loaded,t.total)},a.ontimeout=()=>Promise.reject("Request timed out");const i=new Promise(((t,e)=>{a.onload=()=>{200===a.status?t(a.response):e(a.statusText)},a.ontimeout=()=>{e("Request timed out")}}));return a.send(o),i}callProgressCallbackMethod(t,e,s){t&&t.call(e,s)}}class c{static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}static removeLocalAttribute(t){window.localStorage.removeItem(t)}static hasLocalAttribute(t){return null!==window.localStorage.getItem(t)}static getLocalAttribute(t){return window.localStorage.getItem(t)}}new t("ContainerSessionStorage");class l{static setSessionAttribute(t,e){window.sessionStorage.setItem(t,e)}static removeSessionAttribute(t){window.sessionStorage.removeItem(t)}static getSessionAttribute(t){return window.sessionStorage.getItem(t)}static hasSessionAttribute(t){return null!==window.sessionStorage.getItem(t)}static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}}class d{static addEventListener(t,e,s){const n=t=>{e.call(new s(t))};return window.addEventListener(t,n),()=>{window.removeEventListener(t,n)}}}new t("ContainerUrl");class u{static go(t){window.location=t}static back(){window.history.back()}static replaceUrl(t,e,s){window.history.replaceState(s,e,t)}static pushUrl(t,e,s){window.history.pushState(s,e,t)}static currentUrl(){return window.location.href}static addUserNavigateListener(t,e){d.addEventListener("popstate",t,e)}}export{s as ContainerAsync,n as ContainerCredentialsStorage,r as ContainerDatabaseStorage,o as ContainerElement,i as ContainerHttpClient,a as ContainerHttpResponse,c as ContainerLocalStorage,l as ContainerSessionStorage,u as ContainerUrl,d as ContainerWindow};
